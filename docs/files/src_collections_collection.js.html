<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/collections/collection.js - xeogl</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../../assets/images/logo.png" title="xeogl"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/AmbientLight.html">AmbientLight</a></li>
                                <li><a href="../classes/Billboard.html">Billboard</a></li>
                                <li><a href="../classes/Boundary2D.html">Boundary2D</a></li>
                                <li><a href="../classes/Boundary3D.html">Boundary3D</a></li>
                                <li><a href="../classes/BoundaryGeometry.html">BoundaryGeometry</a></li>
                                <li><a href="../classes/BoxGeometry.html">BoxGeometry</a></li>
                                <li><a href="../classes/Camera.html">Camera</a></li>
                                <li><a href="../classes/CameraControl.html">CameraControl</a></li>
                                <li><a href="../classes/CameraController.html">CameraController</a></li>
                                <li><a href="../classes/CameraFlight.html">CameraFlight</a></li>
                                <li><a href="../classes/Canvas.html">Canvas</a></li>
                                <li><a href="../classes/Cardboard.html">Cardboard</a></li>
                                <li><a href="../classes/Clip.html">Clip</a></li>
                                <li><a href="../classes/Clips.html">Clips</a></li>
                                <li><a href="../classes/Collection.html">Collection</a></li>
                                <li><a href="../classes/CollectionBoundary.html">CollectionBoundary</a></li>
                                <li><a href="../classes/ColorBuf.html">ColorBuf</a></li>
                                <li><a href="../classes/ColorTarget.html">ColorTarget</a></li>
                                <li><a href="../classes/Component.html">Component</a></li>
                                <li><a href="../classes/Configs.html">Configs</a></li>
                                <li><a href="../classes/CubicBezierCurve.html">CubicBezierCurve</a></li>
                                <li><a href="../classes/Cull.html">Cull</a></li>
                                <li><a href="../classes/Curve.html">Curve</a></li>
                                <li><a href="../classes/CylinderGeometry.html">CylinderGeometry</a></li>
                                <li><a href="../classes/DepthBuf.html">DepthBuf</a></li>
                                <li><a href="../classes/DepthTarget.html">DepthTarget</a></li>
                                <li><a href="../classes/DirLight.html">DirLight</a></li>
                                <li><a href="../classes/Entity.html">Entity</a></li>
                                <li><a href="../classes/Fresnel.html">Fresnel</a></li>
                                <li><a href="../classes/Frustum.html">Frustum</a></li>
                                <li><a href="../classes/Geometry.html">Geometry</a></li>
                                <li><a href="../classes/HeightmapGeometry.html">HeightmapGeometry</a></li>
                                <li><a href="../classes/HighlightEntityEffect.html">HighlightEntityEffect</a></li>
                                <li><a href="../classes/Input.html">Input</a></li>
                                <li><a href="../classes/KeyboardAxisCamera.html">KeyboardAxisCamera</a></li>
                                <li><a href="../classes/KeyboardPanCamera.html">KeyboardPanCamera</a></li>
                                <li><a href="../classes/KeyboardRotateCamera.html">KeyboardRotateCamera</a></li>
                                <li><a href="../classes/KeyboardZoomCamera.html">KeyboardZoomCamera</a></li>
                                <li><a href="../classes/LatheGeometry.html">LatheGeometry</a></li>
                                <li><a href="../classes/Layer.html">Layer</a></li>
                                <li><a href="../classes/Lights.html">Lights</a></li>
                                <li><a href="../classes/Lookat.html">Lookat</a></li>
                                <li><a href="../classes/Material.html">Material</a></li>
                                <li><a href="../classes/Model.html">Model</a></li>
                                <li><a href="../classes/Modes.html">Modes</a></li>
                                <li><a href="../classes/MorphTargets.html">MorphTargets</a></li>
                                <li><a href="../classes/MousePanCamera.html">MousePanCamera</a></li>
                                <li><a href="../classes/MousePickEntity.html">MousePickEntity</a></li>
                                <li><a href="../classes/MouseRotateCamera.html">MouseRotateCamera</a></li>
                                <li><a href="../classes/MouseZoomCamera.html">MouseZoomCamera</a></li>
                                <li><a href="../classes/Nintendo3DSGeometry.html">Nintendo3DSGeometry</a></li>
                                <li><a href="../classes/OBJGeometry.html">OBJGeometry</a></li>
                                <li><a href="../classes/Ortho.html">Ortho</a></li>
                                <li><a href="../classes/Path.html">Path</a></li>
                                <li><a href="../classes/PathGeometry.html">PathGeometry</a></li>
                                <li><a href="../classes/Perspective.html">Perspective</a></li>
                                <li><a href="../classes/PhongMaterial.html">PhongMaterial</a></li>
                                <li><a href="../classes/PlaneGeometry.html">PlaneGeometry</a></li>
                                <li><a href="../classes/PointLight.html">PointLight</a></li>
                                <li><a href="../classes/QuadraticBezierCurve.html">QuadraticBezierCurve</a></li>
                                <li><a href="../classes/Quaternion.html">Quaternion</a></li>
                                <li><a href="../classes/Reflect.html">Reflect</a></li>
                                <li><a href="../classes/Rotate.html">Rotate</a></li>
                                <li><a href="../classes/Scale.html">Scale</a></li>
                                <li><a href="../classes/Scene.html">Scene</a></li>
                                <li><a href="../classes/Shader.html">Shader</a></li>
                                <li><a href="../classes/ShaderParams.html">ShaderParams</a></li>
                                <li><a href="../classes/Skybox.html">Skybox</a></li>
                                <li><a href="../classes/SphereGeometry.html">SphereGeometry</a></li>
                                <li><a href="../classes/Spinner.html">Spinner</a></li>
                                <li><a href="../classes/SplineCurve.html">SplineCurve</a></li>
                                <li><a href="../classes/Stage.html">Stage</a></li>
                                <li><a href="../classes/Stationary.html">Stationary</a></li>
                                <li><a href="../classes/StereoEffect.html">StereoEffect</a></li>
                                <li><a href="../classes/TeapotGeometry.html">TeapotGeometry</a></li>
                                <li><a href="../classes/Texture.html">Texture</a></li>
                                <li><a href="../classes/TorusGeometry.html">TorusGeometry</a></li>
                                <li><a href="../classes/Transform.html">Transform</a></li>
                                <li><a href="../classes/Translate.html">Translate</a></li>
                                <li><a href="../classes/VectorTextGeometry.html">VectorTextGeometry</a></li>
                                <li><a href="../classes/Viewport.html">Viewport</a></li>
                                <li><a href="../classes/Visibility.html">Visibility</a></li>
                                <li><a href="../classes/WebVR.html">WebVR</a></li>
                                <li><a href="../classes/xeogl.html">xeogl</a></li>
                                <li><a href="../classes/xeogl.math.math.html">xeogl.math.math</a></li>
                                <li><a href="../classes/ZSpaceEffect.html">ZSpaceEffect</a></li>
                                <li><a href="../classes/ZSpaceStylusControl.html">ZSpaceStylusControl</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/animation.html">animation</a></li>
                                <li><a href="../modules/boundaries.html">boundaries</a></li>
                                <li><a href="../modules/camera.html">camera</a></li>
                                <li><a href="../modules/canvas.html">canvas</a></li>
                                <li><a href="../modules/clipping.html">clipping</a></li>
                                <li><a href="../modules/collections.html">collections</a></li>
                                <li><a href="../modules/configs.html">configs</a></li>
                                <li><a href="../modules/controls.html">controls</a></li>
                                <li><a href="../modules/culling.html">culling</a></li>
                                <li><a href="../modules/curves.html">curves</a></li>
                                <li><a href="../modules/effects.html">effects</a></li>
                                <li><a href="../modules/entities.html">entities</a></li>
                                <li><a href="../modules/geometry.html">geometry</a></li>
                                <li><a href="../modules/importing.html">importing</a></li>
                                <li><a href="../modules/input.html">input</a></li>
                                <li><a href="../modules/interaction.html">interaction</a></li>
                                <li><a href="../modules/lighting.html">lighting</a></li>
                                <li><a href="../modules/materials.html">materials</a></li>
                                <li><a href="../modules/math.html">math</a></li>
                                <li><a href="../modules/paths.html">paths</a></li>
                                <li><a href="../modules/rendering.html">rendering</a></li>
                                <li><a href="../modules/shaders.html">shaders</a></li>
                                <li><a href="../modules/skyboxes.html">skyboxes</a></li>
                                <li><a href="../modules/transforms.html">transforms</a></li>
                                <li><a href="../modules/webvr.html">webvr</a></li>
                                <li><a href="../modules/xeo.html">xeo</a></li>
                                <li><a href="../modules/xeogl.html">xeogl</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/collections/collection.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 A **Collection** is a set of {{#crossLink &quot;Component&quot;}}Components{{/crossLink}}.

 &lt;ul&gt;
 &lt;li&gt;A {{#crossLink &quot;Component&quot;}}Component{{/crossLink}} can be included in more than one Collection.&lt;/li&gt;
 &lt;li&gt;{{#crossLink &quot;Component&quot;}}Components{{/crossLink}} can be added to a Collection by instance, ID or type.&lt;/li&gt;
 &lt;li&gt;A Collection supports iteration over its {{#crossLink &quot;Component&quot;}}Components{{/crossLink}}.&lt;/li&gt;
 &lt;li&gt;A {{#crossLink &quot;Model&quot;}}Model{{/crossLink}} stores the {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} it has loaded in a Collection.&lt;/li&gt;
 &lt;li&gt;A {{#crossLink &quot;CollectionBoundary&quot;}}CollectionBoundary{{/crossLink}} provides a World-space {{#crossLink &quot;Boundary3D&quot;}}{{/crossLink}} that encloses a Collection.&lt;/li&gt;
 &lt;/ul&gt;

 &lt;img src=&quot;../../../assets/images/Collection.png&quot;&gt;&lt;/img&gt;

 ## Examples

 &lt;ul&gt;
 &lt;li&gt;[Adding Entities to a Collection](../../examples/#collections_Collection_creating_add)&lt;/li&gt;
 &lt;li&gt;[Adding components types to a Collection](../../examples/#collections_Collection_creating_type)&lt;/li&gt;
 &lt;li&gt;[Iterating a Collection](../../examples/#boundaries_Collection_iterating)&lt;/li&gt;
 &lt;li&gt;[Visualizing World-space boundary of a Collection](../../examples/#boundaries_CollectionBoundary)&lt;/li&gt;
 &lt;li&gt;[Visualizing World-space boundaries of a hierarchy of Collections](../../examples/#boundaries_CollectionBoundary_hierarchy)&lt;/li&gt;
 &lt;/ul&gt;

 ## Creating Collections

 Our first Collection contains a {{#crossLink &quot;PhongMaterial&quot;}}{{/crossLink}}, added by ID, plus a {{#crossLink &quot;BoxGeometry&quot;}}{{/crossLink}} and
 an {{#crossLink &quot;Entity&quot;}}{{/crossLink}}, both added by instance.

 &#x60;&#x60;&#x60;&#x60;javascript
 var material = new xeogl.PhongMaterial({
     id: &quot;myMaterial&quot;,
     diffuse: [0.5, 0.5, 0.0]
 });

 var geometry = new xeogl.BoxGeometry();

 var entity = new xeogl.Entity({
    id: &quot;myEntity&quot;,
    material: material,
    geometry: geometry
 });

 var collection1 = new xeogl.Collection({ // Initialize with the three components
     components: [
         &quot;myMaterial&quot;,
         geometry,
         myEntity
     ]
 });
 &#x60;&#x60;&#x60;&#x60;
 Our second Collection includes the {{#crossLink &quot;BoxGeometry&quot;}}{{/crossLink}}, added by instance,
 and the {{#crossLink &quot;Entity&quot;}}{{/crossLink}}, added by type. If there were more than
 one {{#crossLink &quot;Entity&quot;}}{{/crossLink}} in the scene, then that type would ensure
 that all the {{#crossLink &quot;Entity&quot;}}Entities{{/crossLink}} were in the Collection.

 &#x60;&#x60;&#x60;&#x60;javascript
 var collection2 = new xeogl.Collection();

 collection2.add([  // Add two components
    geometry,
    &quot;xeogl.Entity&quot;,
 ]);
 &#x60;&#x60;&#x60;&#x60;

 ## Accessing Components

 Iterate over the components in a Collection using the convenience iterator:

 &#x60;&#x60;&#x60;&#x60;javascript
 collection1.iterate(function(component) {
     if (component.isType(&quot;xeogl.Entity&quot;)) {
         this.log(&quot;Found the Entity: &quot; + component.id);
     }
     //..
 });
 &#x60;&#x60;&#x60;&#x60;

 A Collection also registers its components by type:

 &#x60;&#x60;&#x60;&#x60;javascript
 var entities = collection1.types[&quot;xeogl.Entity&quot;];
 var theEntity = entities[&quot;myEntity&quot;];
 &#x60;&#x60;&#x60;&#x60;

 ## Removing Components

 We can remove components from a Collection by instance, ID or type:

 &#x60;&#x60;&#x60;&#x60;javascript
 collection1.remove(&quot;myMaterial&quot;); // Remove one component by ID
 collection1.remove([geometry, myEntity]); // Remove two components by instance
 collection2.remove(&quot;xeogl.Geometry&quot;); // Remove all Geometries
 &#x60;&#x60;&#x60;&#x60;

 ## Getting the boundary of a Collection

 A {{#crossLink &quot;CollectionBoundary&quot;}}{{/crossLink}} provides a {{#crossLink &quot;Boundary3D&quot;}}{{/crossLink}} that
 dynamically fits to the collective World-space boundary of all the Components in a Collection.

 &#x60;&#x60;&#x60;&#x60;javascript
 var collectionBoundary = new xeogl.CollectionBoundary({
    collection: collection1
 });

 var worldBoundary = collectionBoundary.worldBoundary;
 &#x60;&#x60;&#x60;&#x60;
 The {{#crossLink &quot;Boundary3D&quot;}}{{/crossLink}}
 will automatically update whenever we add, remove or update any Components that have World-space boundaries. We can subscribe
 to updates on it like so:

 &#x60;&#x60;&#x60;&#x60;javascript
 worldBoundary.on(&quot;updated&quot;, function() {
     obb = worldBoundary.obb;
     aabb = worldBoundary.aabb;
     center = worldBoundary.center;
     //...
 });
 &#x60;&#x60;&#x60;&#x60;

 Now, if we now re-insert our {{#crossLink &quot;Entity&quot;}}{{/crossLink}} into to our Collection,
 the {{#crossLink &quot;Boundary3D&quot;}}{{/crossLink}} will fire our update handler.

 &#x60;&#x60;&#x60;&#x60;javascript
 collection1.add(myEntity);
 &#x60;&#x60;&#x60;&#x60;


 @class Collection
 @module xeogl
 @submodule collections
 @constructor
 @param [scene] {Scene} Parent {{#crossLink &quot;Scene&quot;}}{{/crossLink}}.
 @param [cfg] {*} Configs
 @param [cfg.id] {String} Optional ID, unique among all components in the parent scene, generated automatically when omitted.
 @param [cfg.meta] {String:Component} Optional map of user-defined metadata to attach to this Collection.
 @param [cfg.components] {{Array of String|Component}} Array of {{#crossLink &quot;Component&quot;}}{{/crossLink}} IDs or instances.
 @extends Component
 */
(function () {

    &quot;use strict&quot;;

    xeogl.Collection = xeogl.Component.extend({

        /**
         JavaScript class name for this Component.

         @property type
         @type String
         @final
         */
        type: &quot;xeogl.Collection&quot;,

        _init: function (cfg) {

            /**
             * The {{#crossLink &quot;Components&quot;}}{{/crossLink}} within this Collection, mapped to their IDs.
             *
             * Fires an {{#crossLink &quot;Collection/updated:event&quot;}}{{/crossLink}} event on change.
             *
             * @property components
             * @type {{String:Component}}
             */
            this.components = {};

            /**
             * The number of {{#crossLink &quot;Components&quot;}}{{/crossLink}} within this Collection.
             *
             * @property numComponents
             * @type Number
             */
            this.numComponents = 0;

            /**
             * A map of maps; for each {{#crossLink &quot;Component&quot;}}{{/crossLink}} type in this Collection,
             * a map to IDs to {{#crossLink &quot;Component&quot;}}{{/crossLink}} instances, eg.
             *
             * &#x60;&#x60;&#x60;&#x60;
             * &quot;xeogl.Geometry&quot;: {
             *   &quot;alpha&quot;: &lt;xeogl.Geometry&gt;,
             *   &quot;beta&quot;: &lt;xeogl.Geometry&gt;
             * },
             * &quot;xeogl.Rotate&quot;: {
             *   &quot;charlie&quot;: &lt;xeogl.Rotate&gt;,
             *   &quot;delta&quot;: &lt;xeogl.Rotate&gt;,
             *   &quot;echo&quot;: &lt;xeogl.Rotate&gt;,
             * },
             * //...
             * &#x60;&#x60;&#x60;&#x60;
             *
             * @property types
             * @type {String:{String:xeogl.Component}}
             */
            this.types = {};

            // Subscriptions to &quot;destroyed&quot; events from components
            this._destroyedSubs = {};

            if (cfg.components) {
                this.add(cfg.components);
            }
        },

        /**
         * Adds one or more {{#crossLink &quot;Component&quot;}}Components{{/crossLink}}s to this Collection.
         *
         * The {{#crossLink &quot;Component&quot;}}Component(s){{/crossLink}} may be specified by instance, ID or type.
         *
         * See class comment for usage examples.
         *
         * The {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} must be in the same {{#crossLink &quot;Scene&quot;}}{{/crossLink}} as this Collection.
         *
         * Fires an {{#crossLink &quot;Collection/added:event&quot;}}{{/crossLink}} event.
         *
         * @method add
         * @param {Array of Component} components Array of {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} instances.
         */
        add: function (components) {

            components = xeogl._isArray(components) ? components : [components];

            for (var i = 0, len = components.length; i &lt; len; i++) {
                this._add(components[i]);
            }
        },

        _add: function (c) {

            var componentId;
            var component;
            var type;
            var types;

            if (c.type) {

                // Component instance

                component = c;

            } else if (xeogl._isNumeric(c) || xeogl._isString(c)) {

                if (this.scene.types[c]) {

                    // Component type

                    type = c;

                    types = this.scene.types[type];

                    if (!types) {
                        this.warn(&quot;Component type not found: &#x27;&quot; + type + &quot;&#x27;&quot;);
                        return;
                    }

                    for (componentId in types) {
                        if (types.hasOwnProperty(componentId)) {
                            this._add(types[componentId]);
                        }
                    }

                    return;

                } else {

                    // Component ID

                    component = this.scene.components[c];

                    if (!component) {
                        this.warn(&quot;Component not found: &quot; + xeogl._inQuotes(c));
                        return;
                    }
                }

            } else {

                return;
            }

            if (component.scene !== this.scene) {

                // Component in wrong Scene

                this.warn(&quot;Attempted to add component from different xeogl.Scene: &quot; + xeogl._inQuotes(component.id));
                return;
            }

            // Add component to this map

            if (this.components[component.id]) {

                // Component already in this Collection
                return;
            }

            this.components[component.id] = component;

            // Register component for its type

            types = this.types[component.type];

            if (!types) {
                types = this.types[component.type] = {};
            }

            types[component.id] = component;

            this.numComponents++;

            // Remove component when it&#x27;s destroyed

            var self = this;

            this._destroyedSubs[component.id] = component.on(&quot;destroyed&quot;,
                function () {
                    self._remove(component);
                });

            /**
             * Fired whenever an individual {{#crossLink &quot;Component&quot;}}{{/crossLink}} is added to this {{#crossLink &quot;Collection&quot;}}{{/crossLink}}.
             * @event added
             * @param value {Component} The {{#crossLink &quot;Component&quot;}}{{/crossLink}} that was added.
             */
            this.fire(&quot;added&quot;, component);

            if (!this._dirty) {
                this._scheduleUpdate();
            }
        },

        _scheduleUpdate: function () {
            if (!this._dirty) {
                this._dirty = true;
                xeogl.scheduleTask(this._notifyUpdated, this);
            }
        },

        _notifyUpdated: function () {

            /* Fired on the next {{#crossLink &quot;Scene/tick.animate:event&quot;}}{{/crossLink}} whenever
             * {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} were added or removed since the
             * last {{#crossLink &quot;Scene/tick.animate:event&quot;}}{{/crossLink}} event, to provide a batched change event
             * for subscribers who don&#x27;t want to react to every individual addition or removal on this Collection.
             *
             * @event updated
             */
            this.fire(&quot;updated&quot;);
            this._dirty = false;
        },

        /**
         * Removes all {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} from this Collection.
         *
         * Fires an {{#crossLink &quot;Collection/updated:event&quot;}}{{/crossLink}} event.
         *
         * @method clear
         */
        clear: function () {

            this.iterate(function (component) {
                this._remove(component);
            });
        },

        /**
         * Destroys all {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} in this Collection.
         *
         * @method destroyAll
         */
        destroyAll: function () {

            this.iterate(function (component) {
                component.destroy();
            });
        },

        /**
         * Removes one or more {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} from this Collection.
         *
         * The {{#crossLink &quot;Component&quot;}}Component(s){{/crossLink}} may be specified by instance, ID or type.
         *
         * See class comment for usage examples.
         *
         * Fires a {{#crossLink &quot;Collection/removed:event&quot;}}{{/crossLink}} event.
         *
         * @method remove
         * @param {Array of Components} components Array of {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} instances.
         */
        remove: function (components) {

            components = xeogl._isArray(components) ? components : [components];

            for (var i = 0, len = components.length; i &lt; len; i++) {
                this._remove(components[i]);
            }
        },

        _remove: function (component) {

            var componentId = component.id;

            if (component.scene !== this.scene) {
                this.warn(&quot;Attempted to remove component that&#x27;s not in same xeogl.Scene: &#x27;&quot; + componentId + &quot;&#x27;&quot;);
                return;
            }

            delete this.components[componentId];

            // Unsubscribe from component destruction

            component.off(this._destroyedSubs[componentId]);

            delete this._destroyedSubs[componentId];

            // Unregister component for its type

            var types = this.types[component.type];

            if (types) {
                delete types[component.id];
            }

            this.numComponents--;

            /**
             * Fired whenever an individual {{#crossLink &quot;Component&quot;}}{{/crossLink}} is removed from this {{#crossLink &quot;Collection&quot;}}{{/crossLink}}.
             * @event removed
             * @param value {Component} The {{#crossLink &quot;Component&quot;}}{{/crossLink}} that was removed.
             */
            this.fire(&quot;removed&quot;, component);

            if (!this._dirty) {
                this._scheduleUpdate();
            }
        },

        /**
         * Iterates with a callback over the {{#crossLink &quot;Component&quot;}}Components{{/crossLink}} in this Collection.
         *
         * @method iterate
         * @param {Function} callback Callback called for each {{#crossLink &quot;Component&quot;}}{{/crossLink}}.
         * @param {Object} [scope=this] Optional scope for the callback, defaults to this Collection.
         */
        iterate: function (callback, scope) {
            scope = scope || this;
            var components = this.components;
            for (var componentId in components) {
                if (components.hasOwnProperty(componentId)) {
                    callback.call(scope, components[componentId]);
                }
            }
        },

        _getJSON: function () {

            var componentIds = [];

            for (var componentId in this.components) {
                if (this.components.hasOwnProperty(componentId)) {
                    componentIds.push(this.components[componentId].id); // Don&#x27;t convert numbers into strings
                }
            }

            return {
                components: componentIds
            };
        },

        _destroy: function () {

            this.clear();
        }
    });

})();
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
